{
  "id": "fundamentals-file-types-explained",
  "title": "File Types Explained",
  "slug": "file-types-explained",
  "version": "build-41",
  "section": "modding",
  "category": "fundamentals",
  "tags": [
    "beginner",
    "syntax",
    "txt",
    "lua",
    "items",
    "recipes",
    "scripts",
    "format"
  ],
  "content": "# File Types Explained\n\n## Overview\n\nProject Zomboid modding uses several file types, each with specific syntax rules. This guide covers the most important ones: script files (`.txt`) for items and recipes, and Lua files (`.lua`) for game logic.\n\n## Script Files (.txt)\n\nScript files define game content using a custom syntax. They live in `media/scripts/`.\n\n### The Golden Rule\n\n> **Items use equals (`=`). Recipes use colons (`:`).**\n\nThis is the #1 cause of beginner errors. Memorize it.\n\n```\n// ITEM - uses equals\nitem Example {\n    Weight = 1.0,\n    Type = Normal,\n}\n\n// RECIPE - uses colons  \nrecipe Example {\n    Result:OutputItem,\n    Time:100.0,\n}\n```\n\n## Item Definition Syntax\n\n### Basic Structure\n\n```\nmodule ModuleName {\n    imports {\n        Base\n    }\n\n    item ItemName {\n        Property = Value,\n        Property = Value,\n    }\n}\n```\n\n### Anatomy of an Item\n\n```\nitem 9mmBulletsMold {                    <- Item identifier (no spaces)\n    DisplayCategory = Ammo,              <- UI category\n    Weight = 0.5,                        <- Encumbrance weight\n    Type = Normal,                       <- Behavior type\n    DisplayName = 9mm Bullets Mold,      <- Player-visible name\n    Icon = BulletMold,                   <- Texture file reference\n    MetalValue = 15,                     <- Smelting value\n    WorldStaticModel = Mold_Ground,      <- 3D model when dropped\n}\n```\n\n### Required Properties\n\nEvery item needs at minimum:\n\n| Property | Purpose | Example |\n|----------|---------|--------|\n| `DisplayName` | Name shown to players | `DisplayName = Hammer,` |\n| `Type` | Fundamental behavior | `Type = Normal,` |\n| `Weight` | Encumbrance value | `Weight = 1.0,` |\n| `Icon` | Inventory texture | `Icon = Hammer,` |\n\n### Item Types\n\n| Type | Use For | Example Items |\n|------|---------|---------------|\n| `Normal` | Standard items | Tools, materials, ammo |\n| `Drainable` | Items with uses/charges | Gunpowder, gas cans, paint |\n| `Food` | Edible items | Food, drinks |\n| `Weapon` | Combat items | Melee, firearms |\n| `Container` | Storage items | Bags, boxes |\n| `Clothing` | Wearable items | Shirts, armor |\n| `Literature` | Readable items | Books, magazines |\n| `Key` | Access items | Keys, keycards |\n\n### Type-Specific Properties\n\n**Normal Items:**\n```\nitem Bullets9mm {\n    Type = Normal,\n    Count = 5,              <- Stack size\n    MetalValue = 1,         <- Smelting return\n}\n```\n\n**Drainable Items:**\n```\nitem GunPowder {\n    Type = Drainable,\n    UseDelta = 0.1,         <- 10% consumed per use\n    WeightEmpty = 0.01,     <- Weight when empty\n    UseWhileEquipped = FALSE,\n}\n```\n\n**Food Items:**\n```\nitem Apple {\n    Type = Food,\n    HungerChange = -20,     <- Reduces hunger\n    ThirstChange = -5,      <- Reduces thirst\n    DaysFresh = 4,          <- Days until rotting\n    DaysTotallyRotten = 8,  <- Days until inedible\n}\n```\n\n### Complete Item Examples\n\n**Simple Material:**\n```\nmodule Base {\n    imports {\n        Base\n    }\n\n    item ScrapMetal {\n        DisplayCategory = Material,\n        DisplayName = Scrap Metal,\n        Type = Normal,\n        Weight = 0.3,\n        Icon = ScrapMetal,\n        MetalValue = 5,\n    }\n}\n```\n\n**Tool with Tags:**\n```\nmodule Base {\n    imports {\n        Base\n    }\n\n    item Hammer {\n        DisplayCategory = Tool,\n        DisplayName = Hammer,\n        Type = Normal,\n        Weight = 1.0,\n        Icon = Hammer,\n        Tags = Hammer,       <- For recipe matching\n    }\n}\n```\n\n## Recipe Definition Syntax\n\n### Basic Structure\n\n```\nmodule ModuleName {\n    imports {\n        Base\n    }\n\n    recipe Recipe Name {\n        InputItem,\n        InputItem=quantity,\n        keep ToolItem,\n\n        Result:OutputItem,\n        Time:100.0,\n        Category:CategoryName,\n    }\n}\n```\n\n### Anatomy of a Recipe\n\n```\nrecipe Saw Logs {                              <- Recipe name (spaces OK)\n    Log,                                       <- Input: 1 log, consumed\n    keep [Recipe.GetItemTypes.Saw],            <- Input: any saw, kept\n\n    CanBeDoneFromFloor:true,                   <- Allow items on ground\n    Result:Plank=3,                            <- Output: 3 planks\n    Sound:Sawing,                              <- Crafting sound\n    Time:230.0,                                <- Duration in ticks\n    Category:Carpentry,                        <- UI category\n    OnGiveXP:Recipe.OnGiveXP.SawLogs,          <- XP callback\n    AnimNode:SawLog,                           <- Animation to play\n    Prop1:Source=2,                            <- Item in hand\n    Prop2:Log,                                 <- Second prop\n}\n```\n\n### Input Syntax\n\n**Basic input (consumed):**\n```\nMaterial,                    <- 1 item, destroyed after crafting\n```\n\n**Quantity input:**\n```\nMaterial=5,                  <- 5 items required, all consumed\n```\n\n**Reusable tool:**\n```\nkeep Hammer,                 <- Tool is NOT consumed\n```\n\n**Alternative items (OR logic):**\n```\nScrewdriver/Knife,           <- Either one works\n```\n\n**Item type matching:**\n```\nkeep [Recipe.GetItemTypes.Saw],    <- Any item with \"Saw\" tag\nkeep [Recipe.GetItemTypes.Hammer], <- Any item with \"Hammer\" tag\n```\n\n### Core Parameters\n\n| Parameter | Purpose | Example |\n|-----------|---------|--------|\n| `Result` | Output item(s) | `Result:Plank=3,` |\n| `Time` | Crafting duration | `Time:100.0,` |\n| `Category` | UI menu placement | `Category:Carpentry,` |\n| `Sound` | Audio during craft | `Sound:Hammering,` |\n\n### Optional Parameters\n\n| Parameter | Purpose | Example |\n|-----------|---------|--------|\n| `NearItem` | Require nearby object | `NearItem:Workbench,` |\n| `SkillRequired` | Minimum skill level | `SkillRequired:Carpentry=3,` |\n| `NeedToBeLearn` | Requires recipe book | `NeedToBeLearn:true,` |\n| `CanBeDoneFromFloor` | Allow ground items | `CanBeDoneFromFloor:true,` |\n| `AllowFrozenItem` | Accept frozen inputs | `AllowFrozenItem:true,` |\n| `AllowRottenItem` | Accept rotten inputs | `AllowRottenItem:true,` |\n\n### Callback Parameters\n\n| Parameter | Purpose | When It Runs |\n|-----------|---------|-------------|\n| `OnGiveXP` | Award skill XP | After completion |\n| `OnCreate` | Modify result item | When item created |\n| `OnTest` | Check if available | When menu builds |\n| `OnCanPerform` | Check if allowed | Before crafting |\n\n**Using callbacks:**\n```\nrecipe Advanced Craft {\n    Material,\n    keep Tool,\n\n    Result:AdvancedItem,\n    OnGiveXP:Recipe.OnGiveXP.SawLogs,       <- Existing vanilla function\n    OnCreate:Recipe.OnCreate.SpikedBat,     <- Existing vanilla function\n}\n```\n\n### Complete Recipe Examples\n\n**Simple Conversion:**\n```\nmodule Base {\n    imports {\n        Base\n    }\n\n    recipe Open Box of 9mm Bullets {\n        Bullets9mmBox,\n\n        Result:Bullets9mm=30,\n        Sound:BoxOfRoundsOpenOne,\n        Time:15.0,\n    }\n}\n```\n\n**Tool-Based Crafting:**\n```\nmodule Base {\n    imports {\n        Base\n    }\n\n    recipe Craft Nails from Screws {\n        Screws=5,\n        keep [Recipe.GetItemTypes.Hammer],\n\n        Result:Nails=5,\n        Time:100.0,\n        Category:Metalwork,\n        Sound:Hammering,\n    }\n}\n```\n\n**Complex Multi-Input:**\n```\nmodule Base {\n    imports {\n        Base\n    }\n\n    recipe Build Spiked Bat {\n        BaseballBat,\n        Nails=5,\n        keep [Recipe.GetItemTypes.Hammer],\n\n        Result:SpikedBaseballBat,\n        Time:150.0,\n        Category:Weapons,\n        Sound:Hammering,\n        OnCreate:Recipe.OnCreate.SpikedBat,\n    }\n}\n```\n\n## Lua File Syntax\n\n### Basic Structure\n\nLua files live in `media/lua/` and use standard Lua 5.1 syntax.\n\n```lua\n-- This is a comment\n\n-- Variable declaration\nlocal myVariable = \"value\"\n\n-- Function declaration\nfunction MyFunction(parameter1, parameter2)\n    -- Function body\n    return result\nend\n\n-- Table (like an object/dictionary)\nlocal myTable = {\n    key1 = \"value1\",\n    key2 = \"value2\",\n}\n```\n\n### PZ-Specific Patterns\n\n**Namespace creation:**\n```lua\nMyMod = MyMod or {}\n```\n\n**Recipe callback:**\n```lua\nfunction Recipe.OnGiveXP.MyCustomXP(recipe, ingredients, result, player)\n    player:getXp():AddXP(Perks.Carpentry, 5)\nend\n```\n\n**Event registration:**\n```lua\nEvents.OnGameStart.Add(function()\n    print(\"Game started!\")\nend)\n```\n\n**Class inheritance:**\n```lua\nISMyPanel = ISPanel:derive(\"ISMyPanel\")\n\nfunction ISMyPanel:new(x, y, width, height)\n    local o = ISPanel:new(x, y, width, height)\n    setmetatable(o, self)\n    self.__index = self\n    return o\nend\n```\n\n### Calling Java from Lua\n\nLua interacts with the Java engine through exposed functions:\n\n```lua\n-- Get game objects\nlocal player = getSpecificPlayer(0)      -- Player object\nlocal inventory = player:getInventory()  -- Inventory object\nlocal cell = getCell()                   -- World cell\nlocal world = getWorld()                 -- World object\n\n-- Common methods\nplayer:getXp():AddXP(Perks.Carpentry, 5) -- Add XP\nplayer:getPerkLevel(Perks.Carpentry)     -- Get skill level\ninventory:AddItem(\"Base.Hammer\")         -- Add item\n\n-- UI text\nlocal text = getText(\"UI_KeyName\")       -- Localized string\n```\n\n### Example: Recipe Callback\n\n**Script definition:**\n```\nrecipe My Recipe {\n    Material,\n    Result:Output,\n    OnGiveXP:MyMod.GiveXP,\n    OnCreate:MyMod.CreateItem,\n}\n```\n\n**Lua implementation:**\n```lua\n-- File: media/lua/server/mymod_recipes.lua\n\nMyMod = MyMod or {}\n\nfunction MyMod.GiveXP(recipe, ingredients, result, player)\n    local skillLevel = player:getPerkLevel(Perks.Carpentry)\n    if skillLevel < 5 then\n        player:getXp():AddXP(Perks.Carpentry, 10)\n    else\n        player:getXp():AddXP(Perks.Carpentry, 3)\n    end\nend\n\nfunction MyMod.CreateItem(items, result, player)\n    -- Set item properties\n    result:setCondition(100)\n    result:setName(\"Custom Named Item\")\nend\n```\n\n## Module System\n\n### What Are Modules?\n\nModules are namespaces that contain items and recipes. Every item belongs to a module.\n\n**Format:** `ModuleName.ItemName`\n\n**Examples:**\n- `Base.Hammer` - Vanilla hammer\n- `MyMod.CustomItem` - Your custom item\n\n### Declaring a Module\n\n```\nmodule MyModName {\n    imports {\n        Base              <- Import vanilla items\n    }\n\n    item MyItem {\n        // Properties\n    }\n\n    recipe MyRecipe {\n        // Inputs and parameters\n    }\n}\n```\n\n### Using Items from Modules\n\n**Explicit reference:**\n```\nrecipe Example {\n    Base.Hammer,           <- Vanilla item (explicit)\n    MyMod.CustomMaterial,  <- Your item (explicit)\n    \n    Result:MyMod.Output,\n}\n```\n\n**Implicit reference (after import):**\n```\nmodule MyMod {\n    imports {\n        Base\n    }\n\n    recipe Example {\n        Hammer,            <- Base.Hammer (implicit, Base imported)\n        \n        Result:Output,     <- MyMod.Output (implicit, current module)\n    }\n}\n```\n\n### Common Module Names\n\n| Mod | Module Name |\n|-----|-------------|\n| Vanilla PZ | `Base` |\n| The Workshop | `TW` |\n| Scrap Guns | `SGuns` |\n\n## Formatting Rules\n\n### Script Files\n\n- **Block delimiters:** `{ }` for modules, items, recipes\n- **Property separator:** `,` (comma) at end of each line\n- **Comments:** `/* multi-line */` or `// single line`\n- **Whitespace:** Flexible (tabs or spaces)\n- **Case sensitivity:** Item/recipe names are case-sensitive\n\n### Lua Files\n\n- **Comments:** `-- single line` or `--[[ multi-line ]]`\n- **Strings:** `\"double\"` or `'single'` quotes\n- **Tables:** `{ key = value, key2 = value2 }`\n- **Functions:** `function Name(args) ... end`\n- **Case sensitivity:** All identifiers are case-sensitive\n\n## Common Errors and Fixes\n\n### Error: Using Wrong Separator\n\n```\nitem Example {\n    Weight: 1.0,        <- WRONG: colon in item\n}\n\nrecipe Example {\n    Result = Item,      <- WRONG: equals in recipe\n}\n```\n\n**Fix:**\n```\nitem Example {\n    Weight = 1.0,       <- CORRECT: equals in item\n}\n\nrecipe Example {\n    Result:Item,        <- CORRECT: colon in recipe\n}\n```\n\n### Error: Forgetting `keep` on Tools\n\n```\nrecipe Example {\n    Material,\n    Hammer,             <- WRONG: Hammer will be consumed!\n    \n    Result:Output,\n}\n```\n\n**Fix:**\n```\nrecipe Example {\n    Material,\n    keep Hammer,        <- CORRECT: Hammer is reusable\n    \n    Result:Output,\n}\n```\n\n### Error: Callback Name Mismatch\n\n```\nrecipe Example {\n    OnGiveXP:MyMod.GiveXp,   <- Case matters!\n}\n```\n\n```lua\nfunction MyMod.GiveXP(...)   -- Different case!\nend\n```\n\n**Fix:** Ensure exact case match between script and Lua.\n\n## Key Takeaways\n\n1. **Items use `=`**, recipes use `:`\n2. **Every item needs:** DisplayName, Type, Weight, Icon\n3. **Use `keep`** for tools that shouldn't be consumed\n4. **Callback names must match exactly** between script and Lua\n5. **Modules are namespaces** - use `ModuleName.ItemName` format\n6. **Case sensitivity matters** everywhere\n\n## Quick Reference\n\n```\n// ITEM TEMPLATE\nitem ItemName {\n    DisplayName = Name,\n    Type = Normal,\n    Weight = 1.0,\n    Icon = IconName,\n}\n\n// RECIPE TEMPLATE\nrecipe Recipe Name {\n    InputItem,\n    keep ToolItem,\n    \n    Result:OutputItem,\n    Time:100.0,\n    Category:CategoryName,\n}\n```",
  "nextSteps": [
    {
      "title": "Recipe Basics",
      "url": "/build-41/modding/recipes/recipe-basics",
      "description": "Create your first recipe"
    },
    {
      "title": "Item Creation",
      "url": "/build-41/modding/items/item-creation",
      "description": "Create your first item"
    },
    {
      "title": "Vanilla Recipe Anatomy",
      "url": "/build-41/modding/recipes/vanilla-recipe-anatomy",
      "description": "All recipe parameters"
    },
    {
      "title": "Vanilla Item Anatomy",
      "url": "/build-41/modding/items/vanilla-item-anatomy",
      "description": "All item properties"
    }
  ],
  "excerpt": "Project Zomboid modding uses .txt script files for items and recipes, and .lua files for game logic. Learn the syntax rules, required properties, and common patterns for each file type.",
  "lastUpdated": "2026-01-09",
  "difficulty": "beginner",
  "tableOfContents": [
    {
      "id": "overview",
      "text": "Overview",
      "level": 2
    },
    {
      "id": "script-files-txt",
      "text": "Script Files (.txt)",
      "level": 2
    },
    {
      "id": "the-golden-rule",
      "text": "The Golden Rule",
      "level": 3
    },
    {
      "id": "item-definition-syntax",
      "text": "Item Definition Syntax",
      "level": 2
    },
    {
      "id": "required-properties",
      "text": "Required Properties",
      "level": 3
    },
    {
      "id": "item-types",
      "text": "Item Types",
      "level": 3
    },
    {
      "id": "type-specific-properties",
      "text": "Type-Specific Properties",
      "level": 3
    },
    {
      "id": "recipe-definition-syntax",
      "text": "Recipe Definition Syntax",
      "level": 2
    },
    {
      "id": "input-syntax",
      "text": "Input Syntax",
      "level": 3
    },
    {
      "id": "core-parameters",
      "text": "Core Parameters",
      "level": 3
    },
    {
      "id": "optional-parameters",
      "text": "Optional Parameters",
      "level": 3
    },
    {
      "id": "callback-parameters",
      "text": "Callback Parameters",
      "level": 3
    },
    {
      "id": "lua-file-syntax",
      "text": "Lua File Syntax",
      "level": 2
    },
    {
      "id": "pz-specific-patterns",
      "text": "PZ-Specific Patterns",
      "level": 3
    },
    {
      "id": "calling-java-from-lua",
      "text": "Calling Java from Lua",
      "level": 3
    },
    {
      "id": "module-system",
      "text": "Module System",
      "level": 2
    },
    {
      "id": "formatting-rules",
      "text": "Formatting Rules",
      "level": 2
    },
    {
      "id": "common-errors-and-fixes",
      "text": "Common Errors and Fixes",
      "level": 2
    },
    {
      "id": "key-takeaways",
      "text": "Key Takeaways",
      "level": 2
    },
    {
      "id": "quick-reference",
      "text": "Quick Reference",
      "level": 2
    }
  ]
}

{
  "id": "ui-framework-isui-buttons",
  "title": "Buttons and Input Components",
  "slug": "isui-buttons",
  "version": "build-41",
  "section": "modding",
  "category": "ui-framework",
  "tags": ["intermediate", "lua", "ui", "isui", "isbutton", "istextentrybox", "input"],
  "excerpt": "ISButton and ISTextEntryBox components for clickable buttons and text input fields in custom UIs.",
  "lastUpdated": "2026-01-10",
  "difficulty": "intermediate",
  "tableOfContents": [
    { "id": "overview", "text": "Overview", "level": 2 },
    { "id": "isbutton", "text": "ISButton", "level": 2 },
    { "id": "button-properties", "text": "Button Properties", "level": 3 },
    { "id": "button-methods", "text": "Button Methods", "level": 3 },
    { "id": "istextentrybox", "text": "ISTextEntryBox", "level": 2 },
    { "id": "text-input-properties", "text": "Text Input Properties", "level": 3 },
    { "id": "text-input-methods", "text": "Text Input Methods", "level": 3 },
    { "id": "common-patterns", "text": "Common Patterns", "level": 2 },
    { "id": "related", "text": "Related", "level": 2 }
  ],
  "content": "# Buttons and Input Components\n\n## Overview\n\nISButton and ISTextEntryBox are the primary interactive components for user input in the ISUI framework.\n\n### Component Hierarchy\n\n```\nISUIElement\n    └── ISPanel\n            └── ISButton           -- Clickable button with text/image\n    └── ISPanelJoypad\n            └── ISTextEntryBox     -- Text input field\n```\n\n### Location\n\n```\nmedia/lua/client/ISUI/ISButton.lua        -- 442 lines\nmedia/lua/client/ISUI/ISTextEntryBox.lua  -- 294 lines\n```\n\n---\n\n## ISButton\n\nISButton is a clickable button that can display text, an icon, or both.\n\n### Constructor\n\n```lua\nfunction ISButton:new(x, y, width, height, title, clicktarget, onclick, onmousedown, allowMouseUpProcessing)\n```\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `x` | number | X position |\n| `y` | number | Y position |\n| `width` | number | Button width (auto-expands for text) |\n| `height` | number | Button height |\n| `title` | string | Button text |\n| `clicktarget` | table | Target for callback (usually `self`) |\n| `onclick` | function | Click handler function |\n| `onmousedown` | function | Optional mouse-down handler |\n| `allowMouseUpProcessing` | boolean | Process mouse-up even if not pressed |\n\n### Basic Usage\n\n```lua\nrequire \"ISUI/ISButton\"\n\n-- Simple button\nlocal button = ISButton:new(\n    10, 10,           -- x, y\n    100, 25,          -- width, height\n    \"Click Me\",       -- title\n    self,             -- target\n    MyPanel.onClick   -- callback\n)\nbutton:initialise()\nbutton:instantiate()\nself:addChild(button)\n\n-- Callback receives target, then the button\nfunction MyPanel:onClick(button)\n    print(\"Button clicked:\", button:getTitle())\nend\n```\n\n### Button Properties\n\n| Property | Type | Default | Description |\n|----------|------|---------|-------------|\n| `title` | string | (param) | Button text |\n| `onclick` | function | (param) | Click callback |\n| `target` | table | (param) | Callback target |\n| `onClickArgs` | table | `{}` | Extra callback arguments |\n| `enable` | boolean | `true` | Button enabled state |\n| `displayBackground` | boolean | `true` | Draw background |\n| `font` | UIFont | `UIFont.Small` | Text font |\n| `image` | Texture | nil | Button icon |\n| `tooltip` | string | nil | Hover tooltip text |\n| `mouseOver` | boolean | - | Mouse is hovering |\n| `pressed` | boolean | - | Button is pressed |\n\n### Color Properties\n\n| Property | Default | Description |\n|----------|---------|-------------|\n| `backgroundColor` | `{r=0, g=0, b=0, a=1}` | Normal background |\n| `backgroundColorMouseOver` | `{r=0.3, g=0.3, b=0.3, a=1}` | Hover background |\n| `borderColor` | `{r=0.7, g=0.7, b=0.7, a=1}` | Border color |\n| `textColor` | `{r=1, g=1, b=1, a=1}` | Text color |\n\n### Button Methods\n\n#### Text & Title\n\n```lua\n-- Get/set title\nbutton:setTitle(\"New Title\")\nlocal title = button:getTitle()\n\n-- Auto-resize to fit text\nbutton:setWidthToTitle(minWidth, isJoypad)\n```\n\n#### Icons\n\n```lua\n-- Set button icon\nlocal tex = getTexture(\"media/ui/myicon.png\")\nbutton:setImage(tex)\n\n-- Force specific icon size\nbutton:forceImageSize(32, 32)\n\n-- Small overlay text (bottom-right)\nbutton:setOverlayText(\"5\")\n```\n\n#### Enable/Disable\n\n```lua\n-- Disable button (greys out)\nbutton:setEnable(false)\n\n-- Re-enable\nbutton:setEnable(true)\n```\n\n#### Click Handling\n\n```lua\n-- Change click handler after creation\nbutton:setOnClick(newFunction, arg1, arg2, arg3, arg4)\n\n-- Programmatically trigger click\nbutton:forceClick()\n\n-- Repeat while held (for increment/decrement)\nbutton:setRepeatWhilePressed(incrementFunction)\n```\n\n#### Visual Customization\n\n```lua\n-- Change font\nbutton:setFont(UIFont.Medium)\n\n-- Hide background (icon-only button)\nbutton:setDisplayBackground(false)\n\n-- Set tooltip\nbutton:setTooltip(\"Click to perform action\")\n\n-- Set colors\nbutton:setBackgroundRGBA(0.2, 0.2, 0.2, 1)\nbutton:setBackgroundColorMouseOverRGBA(0.4, 0.4, 0.4, 1)\nbutton:setBorderRGBA(0.5, 0.5, 0.5, 1)\n```\n\n#### Mouse Callbacks\n\n```lua\n-- Mouse over/out handlers\nbutton:setOnMouseOverFunction(onHoverFunction)\nbutton:setOnMouseOutFunction(onLeaveFunction)\n```\n\n#### Sound\n\n```lua\n-- Custom click sound\nbutton:setSound(\"activate\", \"MySoundName\")\n```\n\n---\n\n## ISTextEntryBox\n\nISTextEntryBox provides text input with Java-backed editing.\n\n### Constructor\n\n```lua\nfunction ISTextEntryBox:new(title, x, y, width, height)\n```\n\n**Note:** Parameter order is `(title, x, y, width, height)` - title comes first!\n\n### Basic Usage\n\n```lua\nrequire \"ISUI/ISTextEntryBox\"\n\n-- Text input field\nlocal textBox = ISTextEntryBox:new(\n    \"\",           -- initial text\n    10, 50,       -- x, y\n    200, 25       -- width, height\n)\ntextBox:initialise()\ntextBox:instantiate()\nself:addChild(textBox)\n\n-- Get the entered text\nlocal text = textBox:getText()\n```\n\n### Text Input Properties\n\n| Property | Type | Default | Description |\n|----------|------|---------|-------------|\n| `title` | string | (param) | Initial/current text |\n| `font` | UIFont | `UIFont.Small` | Text font |\n| `tooltip` | string | nil | Hover tooltip |\n\n### Text Input Methods\n\n#### Text Access\n\n```lua\n-- Get/set text\nlocal text = textBox:getText()\ntextBox:setText(\"New text\")\n\n-- Get raw text without formatting\nlocal raw = textBox:getInternalText()\n\n-- Clear all text\ntextBox:clear()\n\n-- Select all text\ntextBox:selectAll()\n```\n\n#### Focus Control\n\n```lua\n-- Focus the input (keyboard active)\ntextBox:focus()\n\n-- Remove focus\ntextBox:unfocus()\n\n-- Check if focused\nif textBox:isFocused() then ... end\n```\n\n#### Edit State\n\n```lua\n-- Make read-only\ntextBox:setEditable(false)\n\n-- Check if editable\nif textBox:isEditable() then ... end\n\n-- Allow text selection (for read-only)\ntextBox:setSelectable(true)\n```\n\n#### Input Constraints\n\n```lua\n-- Numbers only\ntextBox:setOnlyNumbers(true)\n\n-- Maximum characters\ntextBox:setMaxTextLength(50)\n\n-- Force uppercase\ntextBox:setForceUpperCase(true)\n\n-- Password field (masked)\ntextBox:setMasked(true)\n```\n\n#### Multi-Line\n\n```lua\n-- Enable multi-line\ntextBox:setMultipleLine(true)\n\n-- Set max lines\ntextBox:setMaxLines(5)\n```\n\n#### Visual Options\n\n```lua\n-- Show/hide clear button\ntextBox:setClearButton(true)\n\n-- Show/hide frame\ntextBox:setHasFrame(true)\n\n-- Set validation state (red border if invalid)\ntextBox:setValid(false)\n```\n\n#### Cursor Control\n\n```lua\n-- Get/set cursor position\nlocal pos = textBox:getCursorPos()\ntextBox:setCursorPos(5)\n```\n\n### Callback Hooks\n\nOverride these methods for custom behavior:\n\n```lua\nfunction MyTextBox:onCommandEntered()\n    -- Called when Enter is pressed\n    local text = self:getText()\n    print(\"Entered:\", text)\nend\n\nfunction MyTextBox:onTextChange()\n    -- Called when text changes\n    self:validateInput()\nend\n```\n\n---\n\n## Common Patterns\n\n### Button with Callback Arguments\n\n```lua\nfunction MyPanel:createChildren()\n    ISPanel.createChildren(self)\n    \n    -- Pass extra arguments to callback\n    local button = ISButton:new(10, 10, 80, 25, \"Action\", self, MyPanel.onAction)\n    button.onClickArgs = { \"extraData\", 42 }\n    button:initialise()\n    button:instantiate()\n    self:addChild(button)\nend\n\nfunction MyPanel:onAction(button, arg1, arg2)\n    print(arg1, arg2)  -- \"extraData\", 42\nend\n```\n\n### Text Input with Validation\n\n```lua\nMyInputPanel = ISPanel:derive(\"MyInputPanel\")\n\nfunction MyInputPanel:createChildren()\n    ISPanel.createChildren(self)\n    \n    -- Label\n    self.label = ISLabel:new(10, 10, 25, \"Enter Name:\", 1, 1, 1, 1, UIFont.Small, true)\n    self.label:initialise()\n    self:addChild(self.label)\n    \n    -- Text input\n    self.nameInput = ISTextEntryBox:new(\"\", 100, 10, 150, 25)\n    self.nameInput:initialise()\n    self.nameInput:instantiate()\n    self.nameInput:setMaxTextLength(20)\n    self:addChild(self.nameInput)\n    \n    -- Override onTextChange for validation\n    self.nameInput.onTextChange = function()\n        self:validateName()\n    end\n    \n    -- Submit button\n    self.submitBtn = ISButton:new(260, 10, 60, 25, \"OK\", self, MyInputPanel.onSubmit)\n    self.submitBtn:initialise()\n    self.submitBtn:instantiate()\n    self:addChild(self.submitBtn)\nend\n\nfunction MyInputPanel:validateName()\n    local name = self.nameInput:getText()\n    local valid = #name >= 3\n    self.nameInput:setValid(valid)\n    self.submitBtn:setEnable(valid)\nend\n\nfunction MyInputPanel:onSubmit()\n    local name = self.nameInput:getText()\n    print(\"Submitted:\", name)\nend\n```\n\n### Icon Button\n\n```lua\n-- Create icon-only button\nlocal iconBtn = ISButton:new(10, 10, 32, 32, \"\", self, MyPanel.onIconClick)\niconBtn:initialise()\niconBtn:instantiate()\niconBtn:setImage(getTexture(\"media/ui/settings.png\"))\niconBtn:setDisplayBackground(false)\niconBtn:setTooltip(\"Settings\")\nself:addChild(iconBtn)\n```\n\n### Increment/Decrement Buttons\n\n```lua\nfunction MyPanel:createChildren()\n    ISPanel.createChildren(self)\n    \n    -- Value display\n    self.valueLabel = ISLabel:new(50, 10, 25, \"10\", 1, 1, 1, 1, UIFont.Medium, true)\n    self.valueLabel:initialise()\n    self:addChild(self.valueLabel)\n    \n    -- Minus button (repeats while held)\n    self.minusBtn = ISButton:new(10, 10, 30, 25, \"-\", self, MyPanel.onMinus)\n    self.minusBtn:initialise()\n    self.minusBtn:instantiate()\n    self.minusBtn:setRepeatWhilePressed(MyPanel.onMinus)\n    self:addChild(self.minusBtn)\n    \n    -- Plus button (repeats while held)\n    self.plusBtn = ISButton:new(90, 10, 30, 25, \"+\", self, MyPanel.onPlus)\n    self.plusBtn:initialise()\n    self.plusBtn:instantiate()\n    self.plusBtn:setRepeatWhilePressed(MyPanel.onPlus)\n    self:addChild(self.plusBtn)\n    \n    self.value = 10\nend\n\nfunction MyPanel:onMinus()\n    self.value = math.max(0, self.value - 1)\n    self.valueLabel:setName(tostring(self.value))\nend\n\nfunction MyPanel:onPlus()\n    self.value = math.min(100, self.value + 1)\n    self.valueLabel:setName(tostring(self.value))\nend\n```\n\n### Numeric Input Field\n\n```lua\n-- Numbers-only text field\nlocal numInput = ISTextEntryBox:new(\"0\", 10, 10, 80, 25)\nnumInput:initialise()\nnumInput:instantiate()\nnumInput:setOnlyNumbers(true)\nnumInput:setMaxTextLength(5)\nself:addChild(numInput)\n\n-- Get numeric value\nlocal value = tonumber(numInput:getText()) or 0\n```\n\n---\n\n## Related\n\n- [ISUI Framework Overview](/build-41/modding/ui-framework/isui-overview) - Framework introduction\n- [UI Element Lifecycle](/build-41/modding/ui-framework/isui-lifecycle) - Lifecycle phases\n- [Panels and Containers](/build-41/modding/ui-framework/isui-panels) - ISPanel documentation"
}

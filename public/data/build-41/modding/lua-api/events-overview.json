{
  "id": "events-overview",
  "title": "Events Overview",
  "slug": "events-overview",
  "version": "build-41",
  "section": "modding",
  "category": "lua-api",
  "tags": ["events", "callbacks", "basics"],
  "excerpt": "An introduction to Project Zomboid's event system and how to hook into game events.",
  "lastUpdated": "2024-01-15",
  "difficulty": "beginner",
  "tableOfContents": [
    { "id": "introduction", "text": "Introduction", "level": 2 },
    { "id": "what-are-events", "text": "What Are Events?", "level": 2 },
    { "id": "registering-callbacks", "text": "Registering Callbacks", "level": 2 },
    { "id": "event-parameters", "text": "Event Parameters", "level": 3 },
    { "id": "common-patterns", "text": "Common Patterns", "level": 2 },
    { "id": "best-practices", "text": "Best Practices", "level": 2 }
  ],
  "content": "## Introduction\n\nProject Zomboid's modding system is built around an **event-driven architecture**. Instead of constantly checking for conditions, your mod can \"listen\" for specific game events and respond when they occur.\n\nThis guide will teach you the fundamentals of PZ's event system.\n\n## What Are Events?\n\nEvents are signals that the game broadcasts when something significant happens. Examples include:\n\n- A player spawning into the world\n- A zombie being killed\n- An item being crafted\n- The game world loading\n\nBy hooking into these events, your mod can execute code at exactly the right moment.\n\n## Registering Callbacks\n\nTo listen for an event, use the `Events` table:\n\n```lua\nEvents.OnGameStart.Add(function()\n    print(\"The game has started!\")\nend)\n```\n\nYou can also use named functions for cleaner code:\n\n```lua\nlocal function onGameStart()\n    print(\"The game has started!\")\nend\n\nEvents.OnGameStart.Add(onGameStart)\n```\n\n### Event Parameters\n\nMany events pass parameters to your callback. Check the documentation for each event to know what data you'll receive:\n\n```lua\nEvents.OnPlayerDeath.Add(function(player)\n    print(player:getUsername() .. \" has died!\")\nend)\n```\n\n## Common Patterns\n\nHere are some patterns you'll use frequently:\n\n### Initialization on Game Start\n\n```lua\nlocal MyMod = {}\n\nlocal function initMod()\n    MyMod.isInitialized = true\n    -- Setup your mod here\nend\n\nEvents.OnGameStart.Add(initMod)\n```\n\n### Per-Player Setup\n\n```lua\nEvents.OnCreatePlayer.Add(function(playerIndex, player)\n    -- Initialize player-specific data\n    player:getModData().myModData = {\n        level = 1,\n        experience = 0\n    }\nend)\n```\n\n### Tick-Based Updates\n\n```lua\nlocal tickCounter = 0\n\nEvents.OnTick.Add(function()\n    tickCounter = tickCounter + 1\n    if tickCounter >= 60 then -- Every ~1 second\n        tickCounter = 0\n        -- Do periodic work\n    end\nend)\n```\n\n## Best Practices\n\n1. **Don't overuse OnTick** - It runs every frame and can hurt performance\n2. **Use specific events** - Choose the most specific event for your needs\n3. **Clean up callbacks** - Remove event listeners when they're no longer needed\n4. **Check for nil** - Always validate parameters before using them\n5. **Keep callbacks fast** - Avoid heavy computation in event handlers\n\n```lua\n-- Example of removing a callback\nlocal function temporaryHandler()\n    -- Do something once\n    Events.OnGameStart.Remove(temporaryHandler)\nend\n\nEvents.OnGameStart.Add(temporaryHandler)\n```\n\n---\n\nNow that you understand the basics, explore the [Common Events Reference](/build-41/modding/lua-api/common-events) to see what events are available."
}

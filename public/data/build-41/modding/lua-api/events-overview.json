{
  "id": "events-overview",
  "title": "Events Overview",
  "slug": "events-overview",
  "version": "build-41",
  "section": "modding",
  "category": "lua-api",
  "tags": ["events", "callbacks", "basics", "lua", "api"],
  "excerpt": "Introduction to Project Zomboid's event-driven architecture with ~150 events for hooking into game systems.",
  "lastUpdated": "2026-01-10",
  "difficulty": "beginner",
  "tableOfContents": [
    { "id": "introduction", "text": "Introduction", "level": 2 },
    { "id": "event-system-architecture", "text": "Event System Architecture", "level": 2 },
    { "id": "registering-callbacks", "text": "Registering Callbacks", "level": 2 },
    { "id": "removing-callbacks", "text": "Removing Callbacks", "level": 3 },
    { "id": "event-categories", "text": "Event Categories", "level": 2 },
    { "id": "most-used-events", "text": "Most Used Events", "level": 2 },
    { "id": "common-patterns", "text": "Common Patterns", "level": 2 },
    { "id": "performance-best-practices", "text": "Performance Best Practices", "level": 2 },
    { "id": "related", "text": "Related", "level": 2 }
  ],
  "content": "# Events Overview\n\n## Introduction\n\nProject Zomboid uses an **event-driven architecture** where game systems broadcast events that mods can hook into. The `Events` table contains **~150 unique events** that fire during gameplay, UI interactions, and game state changes.\n\nInstead of constantly checking for conditions, your mod can \"listen\" for specific game events and respond when they occur.\n\n---\n\n## Event System Architecture\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                     Java Engine                              │\n│  (Defines most events, triggers from game code)              │\n└──────────────────────────┬──────────────────────────────────┘\n                           │ triggerEvent()\n                           ▼\n┌─────────────────────────────────────────────────────────────┐\n│                   LuaEventManager                            │\n│  - Manages event registration                                │\n│  - Routes events to registered handlers                      │\n│  - LuaEventManager.AddEvent(\"EventName\") for Lua events      │\n└──────────────────────────┬──────────────────────────────────┘\n                           │\n                           ▼\n┌─────────────────────────────────────────────────────────────┐\n│                    Events.EventName                          │\n│  - Events.EventName.Add(function)                            │\n│  - Events.EventName.Remove(function)                         │\n└─────────────────────────────────────────────────────────────┘\n```\n\nMost events are defined in the Java engine and triggered by game code. The `LuaEventManager` routes these events to Lua handlers registered via the `Events` table.\n\n---\n\n## Registering Callbacks\n\nTo listen for an event, use the `Events` table:\n\n```lua\n-- Anonymous function (simple but can't be removed)\nEvents.OnGameStart.Add(function()\n    print(\"The game has started!\")\nend)\n\n-- Named function (recommended - can be removed)\nlocal function onGameStart()\n    print(\"The game has started!\")\nend\nEvents.OnGameStart.Add(onGameStart)\n```\n\n### Event Parameters\n\nMany events pass parameters to your callback. Always check the documentation for each event:\n\n```lua\nEvents.OnPlayerDeath.Add(function(player)\n    print(player:getUsername() .. \" has died!\")\nend)\n\nEvents.OnCreatePlayer.Add(function(playerIndex, player)\n    print(\"Player \" .. playerIndex .. \" created: \" .. player:getUsername())\nend)\n```\n\n### Removing Callbacks\n\nTo remove a callback, you must have a reference to the function:\n\n```lua\nlocal function myHandler()\n    -- Do something once\n    Events.OnGameStart.Remove(myHandler)\nend\n\nEvents.OnGameStart.Add(myHandler)\n```\n\n---\n\n## Event Categories\n\n| Category | Events | Description | Article |\n|----------|--------|-------------|----------|\n| **Lifecycle** | 15 | Game boot, start, save, load | [Lifecycle Events](/build-41/modding/lua-api/events-lifecycle) |\n| **Player** | 12 | Movement, death, updates, XP | [Player Events](/build-41/modding/lua-api/events-player) |\n| **Input** | 10 | Keyboard, mouse, joypad | [Input Events](/build-41/modding/lua-api/events-input) |\n| **UI** | 8 | Context menus, UI creation | [UI Events](/build-41/modding/lua-api/events-ui) |\n| **World** | 12 | Objects, time, weather | [World Events](/build-41/modding/lua-api/events-world) |\n| **Vehicles** | 8 | Enter, exit, damage | [Vehicle Events](/build-41/modding/lua-api/events-vehicle) |\n| **Zombies** | 4 | Death, updates, hits | [Combat Events](/build-41/modding/lua-api/events-combat) |\n| **Multiplayer** | 20 | Connection, chat, factions | [Multiplayer Events](/build-41/modding/lua-api/events-multiplayer) |\n| **Time** | 6 | Ticks, minutes, hours, days | [Lifecycle Events](/build-41/modding/lua-api/events-lifecycle) |\n| **Foraging** | 5 | Search mode, icons | Foraging Events |\n\n---\n\n## Most Used Events\n\nThese are the events you'll use in almost every mod:\n\n### OnGameStart\n**The most common initialization point for mods.** Fires when a new game starts or save is loaded.\n\n```lua\nEvents.OnGameStart.Add(function()\n    local player = getPlayer()\n    print(\"Game started for\", player:getUsername())\n    -- Initialize your mod here\nend)\n```\n**Listeners:** 39+ vanilla files use this event\n\n---\n\n### OnCreatePlayer\nPlayer character is created. Good for per-player initialization.\n\n```lua\nEvents.OnCreatePlayer.Add(function(playerIndex, player)\n    player:getModData().myMod = { level = 1 }\nend)\n```\n\n---\n\n### OnFillWorldObjectContextMenu\nRight-click context menu on world objects. Essential for adding custom actions.\n\n```lua\nEvents.OnFillWorldObjectContextMenu.Add(function(playerIndex, context, worldobjects, test)\n    for _, obj in ipairs(worldobjects) do\n        if instanceof(obj, \"IsoThumpable\") then\n            context:addOption(\"My Action\", obj, myFunction)\n        end\n    end\nend)\n```\n\n---\n\n### OnFillInventoryObjectContextMenu\nRight-click context menu on inventory items.\n\n```lua\nEvents.OnFillInventoryObjectContextMenu.Add(function(playerIndex, context, items)\n    for _, item in ipairs(items) do\n        if item:getFullType() == \"Base.Hammer\" then\n            context:addOption(\"Special Action\", item, myFunction)\n        end\n    end\nend)\n```\n\n---\n\n### OnKeyPressed\nKey press detection. Perfect for hotkeys.\n\n```lua\nEvents.OnKeyPressed.Add(function(key)\n    if key == Keyboard.KEY_F5 then\n        print(\"F5 pressed!\")\n    end\nend)\n```\n**Listeners:** 31+ vanilla files use this event\n\n---\n\n## Common Patterns\n\n### Initialization Pattern\n\n```lua\nlocal MyMod = {}\nMyMod.isInitialized = false\n\nlocal function initMod()\n    if MyMod.isInitialized then return end\n    MyMod.isInitialized = true\n    \n    -- Setup your mod\n    print(\"MyMod initialized!\")\nend\n\nEvents.OnGameStart.Add(initMod)\n```\n\n### Per-Player Data Pattern\n\n```lua\nEvents.OnCreatePlayer.Add(function(playerIndex, player)\n    local modData = player:getModData()\n    if not modData.myMod then\n        modData.myMod = {\n            level = 1,\n            experience = 0,\n            settings = {}\n        }\n    end\nend)\n```\n\n### Periodic Update Pattern\n\n```lua\n-- Using EveryOneMinute instead of OnTick for better performance\nEvents.EveryOneMinute.Add(function()\n    local player = getPlayer()\n    if player then\n        -- Periodic updates here\n    end\nend)\n```\n\n### One-Time Event Pattern\n\n```lua\nlocal function oneTimeHandler()\n    print(\"This only runs once\")\n    Events.OnGameStart.Remove(oneTimeHandler)\nend\nEvents.OnGameStart.Add(oneTimeHandler)\n```\n\n---\n\n## Performance Best Practices\n\n### 1. Avoid High-Frequency Events\n\n```lua\n-- BAD: OnTick runs every frame (30-60 times/second)\nEvents.OnTick.Add(function(tick)\n    -- Heavy computation here = lag\nend)\n\n-- GOOD: Use less frequent events\nEvents.EveryOneMinute.Add(function()\n    -- Runs once per in-game minute\nend)\n```\n\n### 2. Early Exit When Possible\n\n```lua\nEvents.OnPlayerUpdate.Add(function(player)\n    -- Exit early if not relevant\n    if not player:isOutside() then return end\n    if not player:isMoving() then return end\n    \n    -- Only process when needed\n    checkWeatherEffects(player)\nend)\n```\n\n### 3. Cache Expensive Operations\n\n```lua\nlocal cachedItems = nil\nlocal cacheTime = 0\n\nEvents.EveryTenMinutes.Add(function()\n    -- Only recalculate every 10 minutes\n    cachedItems = calculateItems()\n    cacheTime = getTimestamp()\nend)\n```\n\n### 4. Use Specific Events\n\n```lua\n-- BAD: Checking death in OnPlayerUpdate\nEvents.OnPlayerUpdate.Add(function(player)\n    if player:isDead() then handleDeath(player) end\nend)\n\n-- GOOD: Use the specific event\nEvents.OnPlayerDeath.Add(function(player)\n    handleDeath(player)\nend)\n```\n\n### 5. Clean Up Callbacks\n\n```lua\n-- Remove listeners when no longer needed\nfunction MyMod.shutdown()\n    Events.OnTick.Remove(MyMod.tickHandler)\n    Events.OnGameStart.Remove(MyMod.initHandler)\nend\n```\n\n---\n\n## Related\n\n- [Lifecycle Events](/build-41/modding/lua-api/events-lifecycle) - Game boot, start, save events\n- [Player Events](/build-41/modding/lua-api/events-player) - Player-specific events\n- [Context Menus](/build-41/modding/lua-api/context-menus) - ISContextMenu system\n- [Timed Actions](/build-41/modding/lua-api/timed-actions) - ISBaseTimedAction for custom actions\n- [Events Reference](/build-41/modding/reference/events) - Complete event list"
}
